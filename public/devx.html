<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DevTools Lockdown + Toasts</title>
  <style>
    body {
      font-family: sans-serif;
    }

    /* Blocking overlay */
    #overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      color: #fff;
      font-size: 24px;
      text-align: center;
      padding-top: 20%;
      z-index: 9998;
      pointer-events: all; /* eats clicks */
    }

    /* Toast container */
    #toast-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 9999;
    }

    .toast {
      background: rgba(0, 0, 0, 0.85);
      color: #fff;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      animation: slideIn 0.4s ease, fadeOut 0.4s ease 4.6s forwards;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(100%); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes fadeOut {
      to { opacity: 0; transform: translateX(100%); }
    }
  </style>
</head>
<body>
  <h1>Normal Page</h1>
  <input type="text" placeholder="Try typing here...">

  <div id="overlay">ðŸš¨ DevTools is open. Input disabled.</div>
  <div id="toast-container"></div>

  <script type="module">
    import devtools from './node_modules/devtools-detect/index.js';

    const overlay = document.getElementById('overlay');
    const container = document.getElementById('toast-container');

    // Toast system
    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      container.appendChild(toast);

      setTimeout(() => toast.remove(), 5000);
    }

    // Console blocker
    function blockConsole() {
      const noop = () => {};
      for (let method of ["log","warn","error","debug","info","dir","clear"]) {
        console[method] = noop;
      }
    }

    function restoreConsole() {
      location.reload(); // cleanest reset
    }

    // Initial state
    if (devtools.isOpen) {
      overlay.style.display = 'block';
      document.body.style.pointerEvents = "none";
      overlay.style.pointerEvents = "all";
      blockConsole();
      showToast("ðŸš¨ DevTools detected at load!");
    }

    // React to open/close
    window.addEventListener('devtoolschange', event => {
      if (event.detail.isOpen) {
        overlay.style.display = 'block';
        document.body.style.pointerEvents = "none";
        overlay.style.pointerEvents = "all";
        blockConsole();
        showToast("ðŸš¨ DevTools opened!");
      } else {
        overlay.style.display = 'none';
        document.body.style.pointerEvents = "auto";
        restoreConsole();
        showToast("âœ… DevTools closed.");
      }
    });
  </script>
</body>
</html>
